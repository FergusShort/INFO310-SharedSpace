<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groceries</title>
    <link rel="stylesheet" href="/groceries.css">

</head>

<body>
    <div class="container">
        <h1>Groceries</h1>

        <ul class="list" id="checklist"></ul>

        <div class="buttons">
            <form action="/groceries/add" method="POST" class="add-form">
                <input type="text" name="item" id="itemInput" placeholder="Item" required>

                <div class="price-quantity-row">
                    <input type="number" name="price" step="0.01" min="0.01" placeholder="Price" required>
                    <input type="number" name="quantity" min="1" placeholder="Quantity" required>
                </div>

                <button type="submit">Add item</button>
            </form>

            <div class="buttons-bottom">
                <form action="/groceries/clear-checked" method="POST">
                    <button type="submit">Clear checked</button>
                </form>
                <form action="/groceries/clear-all" method="POST">
                    <button type="submit">Clear all</button>
                </form>
            </div>
        </div>


        <script>
            function addItem() {
                const input = document.getElementById("itemInput");
                const itemText = input.value.trim();

                if (itemText === "") {
                    return;
                }

                const li = document.createElement("li");
                li.classList.add("item");

                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";

                const label = document.createElement("label");
                label.textContent = itemText;

                li.appendChild(checkbox);
                li.appendChild(label);

                document.getElementById("checklist").appendChild(li);

                checklist.scrollTop = checklist.scrollHeight; // Scroll to the bottom when list gets long

                input.value = "";
            }

            function clearChecked() {
                const items = document.querySelectorAll("#checklist .item");
                items.forEach(item => {
                    const checkbox = item.querySelector("input[type='checkbox']");
                    if (checkbox.checked) {
                        item.remove();
                    }
                });
            }

            function clearAll() {
                document.getElementById("checklist").innerHTML = "";
            }

            document.getElementById("itemInput").addEventListener("keypress", function (event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    addItem();
                }
            });
        </script>
    </div>
</body>

</html>